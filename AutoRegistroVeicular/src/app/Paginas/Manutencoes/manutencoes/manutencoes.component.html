<div class="container mt-4">
   
    
   <div class="container mt-4" *ngIf="mostrarFormularioManutencao && manutencaoForm">
  <h2>Cadastro de Nova Manutenção</h2>

  <form [formGroup]="manutencaoForm" (ngSubmit)="cadastrarManutencao()">
    <div class="mb-3">
      <label for="nomePeca" class="form-label">Nome da Peça</label>
      <input type="text" id="nomePeca" class="form-control" formControlName="nomePeca">
    </div>

    <div class="mb-3">
      <label for="preco" class="form-label">Preço</label>
      <input type="number" id="preco" class="form-control" formControlName="preco">
    </div>

    <div class="mb-3">
      <label for="dataCompra" class="form-label">Data da Compra</label>
      <input type="date" id="dataCompra" class="form-control" formControlName="dataDaCompra">
    </div>

    <div class="mb-3">
      <label for="dataInstalacao" class="form-label">Data da Instalação</label>
      <input type="date" id="dataInstalacao" class="form-control" formControlName="dataDaInstalacao">
    </div>

    <div class="mb-3">
      <label for="fabricante" class="form-label">Fabricante</label>
      <input type="text" id="fabricante" class="form-control" formControlName="fabricante">
    </div>

    <button type="submit" class="btn btn-success" [disabled]="manutencaoForm.invalid">Salvar Manutenção</button>
  </form>
</div>
  </div>


   <!-- Alteração -->
  <div class="container mt-4" *ngIf="alteracaoForm">
    <form [formGroup]="alteracaoForm" (ngSubmit)="onUpdate()">
      <h2>Alteração de Manutenção</h2>
  
      <!-- ID da Manutenção (Oculto, mas útil para envio) -->
      <input type="hidden" formControlName="id">
  
      <!-- Nome da Peça -->
      <div class="mb-3">
        <label for="Nome da Peça" class="form-label">Tipo de Manutenção</label>
        <input type="text" id="nomePeca" class="form-control" formControlName="nomePeca">
        <div *ngIf="alteracaoForm.controls['nomePeca'].invalid && alteracaoForm.controls['nomePeca'].touched" class="text-danger">
          O nome da preça é obrigatório.
        </div>
      </div>
  
      <!-- Preço -->
      <div class="mb-3">
        <label for="preco" class="form-label">Preço</label>
        <input type="number" id="preco" class="form-control" formControlName="preco" step="0.01"  (input)="onPrecoChange($event)">
        <div *ngIf="alteracaoForm.controls['preco'].invalid && alteracaoForm.controls['preco'].touched" class="text-danger">
          O preço tem que ser maior do que 0.01
        </div>
      </div>
  
      <!-- Data da compra -->
      <div class="mb-3">
        <label for="Data da Compra" class="form-label">Data da Compra</label>
        <input type="date" id="dataDaCompra" class="form-control" min="1" formControlName="dataDaCompra">
        <div *ngIf="alteracaoForm.controls['dataDaCompra'].invalid && alteracaoForm.controls['dataDaCompra'].touched" class="text-danger">
          Insira uma data válida!
        </div>
      </div>
  
         <!-- Data da instalação -->
         <div class="mb-3">
          <label for="Data da instalação" class="form-label">Data da instalação</label>
          <input type="date" id="dataDaInstalacao" class="form-control" min="1" formControlName="dataDaInstalacao">
          <div *ngIf="alteracaoForm.controls['dataDaInstalacao'].invalid && alteracaoForm.controls['dataDaInstalacao'].touched" class="text-danger">
            Insira uma data válida!
          </div>
        </div>

      <!-- Fabricante -->
      <div class="mb-3">
        <label for="Fabricante" class="form-label">Fabricante</label>
        <input type="text" id="fabricante" class="form-control" min="1" formControlName="fabricante">
        <div *ngIf="alteracaoForm.controls['fabricante'].invalid && alteracaoForm.controls['fabricante'].touched" class="text-danger">
          Insira o nome do fabricante.
        </div>
      </div>
  
      <!-- Botões de Ação -->
      <div class="d-flex justify-content-between">
        <button type="submit" class="btn btn-success" [disabled]="alteracaoForm.invalid">Salvar Alterações</button>
        <button type="button" class="btn btn-danger" (click)="onDelete()">Excluir</button>
      </div>
    </form>
  </div>